<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer Overlay â€” Spooky</title>
    <link rel="stylesheet" href="../../css/timer-structure.css">
    <style>
        /* ===== SPOOKY SPLASH SPECTACULAR THEME CSS ===== */
        @import url('https://fonts.googleapis.com/css2?family=Creepster&display=swap');

        :root {
            --theme-font: 'Creepster', cursive;
            --spooky-orange: #ff6600;
            --spooky-purple: #4a0e4e;
            --spooky-purple-light: #6b2070;
            --spooky-green: #00cc44;
            --spooky-yellow: #ffcc00;
            --spooky-brown: #8B4513;
            --spooky-black: #1a0a2e;
            --border-width: 3px;
            --border-radius: 10px;
            --shadow-color: rgba(0, 0, 0, 0.6);
        }

        body { font-family: var(--theme-font); }

        .timer-content {
            background: linear-gradient(180deg, var(--spooky-purple-light) 0%, var(--spooky-purple) 50%, #2d0630 100%);
            border: var(--border-width) solid var(--spooky-orange);
            border-radius: var(--border-radius);
            box-shadow:
                inset 0 -4px 0 rgba(0,0,0,0.4),
                0 4px 12px var(--shadow-color),
                0 0 20px rgba(255, 102, 0, 0.3),
                0 0 40px rgba(74, 14, 78, 0.4);
        }

        .timer-content.visible {
            animation: zombieAppear 0.6s cubic-bezier(0.34, 1.2, 0.64, 1) forwards;
        }

        .timer-content.hiding {
            animation: zombieSink 0.4s ease-in forwards;
        }

        @keyframes zombieAppear {
            0% { transform: scale(0.5) translateY(20px); opacity: 0; }
            50% { transform: scale(1.05) translateY(-5px); opacity: 0.8; }
            100% { transform: scale(1) translateY(0); opacity: 1; }
        }

        @keyframes zombieSink {
            0% { transform: scale(1) translateY(0); opacity: 1; }
            100% { transform: scale(0.8) translateY(30px); opacity: 0; }
        }

        .timer-label {
            font-size: 1rem;
            color: var(--spooky-orange);
            text-shadow: 0 0 8px rgba(255, 102, 0, 0.5), 2px 2px 0 #000;
        }

        .running-time {
            font-size: 2.2rem;
            color: var(--spooky-green);
            text-shadow:
                0 0 10px rgba(0, 204, 68, 0.6),
                0 0 20px rgba(0, 204, 68, 0.3),
                2px 2px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;
            animation: eerieGlow 2s ease-in-out infinite;
        }

        @keyframes eerieGlow {
            0%, 100% {
                text-shadow:
                    0 0 10px rgba(0, 204, 68, 0.6),
                    0 0 20px rgba(0, 204, 68, 0.3),
                    2px 2px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;
            }
            50% {
                text-shadow:
                    0 0 15px rgba(0, 204, 68, 0.8),
                    0 0 30px rgba(0, 204, 68, 0.5),
                    0 0 45px rgba(0, 204, 68, 0.2),
                    2px 2px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;
            }
        }

        /* Running zombie decoration */
        .zombie-runner {
            display: inline-block;
            width: 50px;
            height: 50px;
            margin-right: 10px;
            flex-shrink: 0;
            position: relative;
        }

        .zombie-runner svg {
            width: 100%;
            height: 100%;
        }

        /* Zombie running leg animation when timer visible */
        .timer-content.visible .zombie-runner {
            animation: zombieWalk 0.6s steps(2) infinite;
        }

        @keyframes zombieWalk {
            0% { transform: translateY(0); }
            50% { transform: translateY(-3px) rotate(2deg); }
            100% { transform: translateY(0); }
        }

        /* Hide the clock-hand (not used in zombie theme) */
        .clock-hand { display: none; }
    </style>
</head>
<body>
    <div class="timer-container">
        <!-- Placeholder shown until first data received -->
        <div class="placeholder-content timer-content visible" id="placeholder">
            <span class="placeholder-text">Waiting for data...</span>
        </div>

        <div class="timer-content" id="timerContent">
            <div class="clock-hand" id="clockHand"></div>
            <div class="zombie-runner">
                <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                    <!-- Zombie head -->
                    <rect x="20" y="4" width="24" height="22" rx="8" fill="#7ab648"/>
                    <rect x="20" y="4" width="24" height="22" rx="8" fill="none" stroke="#5a8a30" stroke-width="1"/>
                    <!-- Messy hair -->
                    <path d="M20,10 Q18,4 22,6 Q24,2 28,5 Q32,1 36,5 Q40,2 42,6 Q46,4 44,10" fill="#3a5a20" stroke="none"/>
                    <!-- Eyes (uneven, zombie-like) -->
                    <ellipse cx="27" cy="14" rx="3.5" ry="3.5" fill="#1a0a2e"/>
                    <ellipse cx="37" cy="15" rx="3" ry="2.5" fill="#1a0a2e"/>
                    <!-- Glowing pupils -->
                    <ellipse cx="27" cy="14" rx="1.5" ry="1.5" fill="#ff6600" opacity="0.8"/>
                    <ellipse cx="37" cy="15" rx="1.5" ry="1.2" fill="#ff6600" opacity="0.8"/>
                    <!-- Stitched mouth -->
                    <line x1="24" y1="22" x2="40" y2="21" stroke="#1a0a2e" stroke-width="1.5"/>
                    <line x1="27" y1="20" x2="27" y2="23" stroke="#1a0a2e" stroke-width="1"/>
                    <line x1="31" y1="20" x2="31" y2="23" stroke="#1a0a2e" stroke-width="1"/>
                    <line x1="35" y1="20" x2="35" y2="22" stroke="#1a0a2e" stroke-width="1"/>
                    <!-- Body (tattered clothes) -->
                    <rect x="18" y="26" width="28" height="22" rx="4" fill="#444"/>
                    <rect x="18" y="26" width="28" height="22" rx="4" fill="none" stroke="#333" stroke-width="1"/>
                    <!-- Tattered edges -->
                    <path d="M18,48 L20,44 L22,48 L24,44 L26,48 L28,44 L30,48 L32,44 L34,48 L36,44 L38,48 L40,44 L42,48 L44,44 L46,48" fill="#444" stroke="#333" stroke-width="0.5"/>
                    <!-- Arms outstretched -->
                    <rect x="0" y="28" width="18" height="5" rx="2.5" fill="#7ab648"/>
                    <rect x="0" y="28" width="18" height="5" rx="2.5" fill="none" stroke="#5a8a30" stroke-width="0.8"/>
                    <rect x="46" y="30" width="18" height="5" rx="2.5" fill="#7ab648"/>
                    <rect x="46" y="30" width="18" height="5" rx="2.5" fill="none" stroke="#5a8a30" stroke-width="0.8"/>
                    <!-- Hands -->
                    <circle cx="2" cy="30" r="3" fill="#7ab648" stroke="#5a8a30" stroke-width="0.8"/>
                    <circle cx="62" cy="32" r="3" fill="#7ab648" stroke="#5a8a30" stroke-width="0.8"/>
                    <!-- Legs -->
                    <rect x="22" y="48" width="7" height="12" rx="2" fill="#555"/>
                    <rect x="35" y="48" width="7" height="12" rx="2" fill="#555"/>
                    <!-- Feet -->
                    <rect x="20" y="58" width="11" height="4" rx="2" fill="#333"/>
                    <rect x="33" y="58" width="11" height="4" rx="2" fill="#333"/>
                </svg>
            </div>
            <span class="timer-label">TIME</span>
            <span class="running-time" id="runningTime"></span>
        </div>
    </div>

    <script src="../../js/overlay-core.js"></script>
    <script src="../../js/timer-overlay.js"></script>
    <script>
        SwimOverlay.init({ onData: processTimerData });
    </script>
</body>
</html>
